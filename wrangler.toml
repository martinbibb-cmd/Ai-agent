name = "ai-agent"
main = "src/index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Workers configuration
workers_dev = true

# Bind the Anthropic API key secret
[vars]
# Public variables go here

# Secrets (set via: wrangler secret put ANTHROPIC_API_KEY)
# ANTHROPIC_API_KEY is already configured in Cloudflare dashboard

# R2 bucket for document storage
[[r2_buckets]]
binding = "DOCUMENTS"
bucket_name = "agentstorage"

# D1 database for document metadata and searchable text
[[d1_databases]]
binding = "DB"
database_name = "agent-db"
database_id = "88b7a790-49ff-4d32-bebc-0af0194fed57"

# Asset bindings for serving static files
[assets]
directory = "public"

# Observability configuration
[observability]
enabled = true
head_sampling_rate = 1
